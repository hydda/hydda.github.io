<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Creating a Code Generator</title>
  
	<link type="text/css" rel="stylesheet" media="all" href="/resources/css/style.css" />
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous" />
	<link rel="shortcut icon" href="/favicon.ico" />

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.0/gh-fork-ribbon.min.css" />
	<!--[if lt IE 9]>
	    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.0/gh-fork-ribbon.ie.min.css" />
	<![endif]-->

	<script src="http://code.jquery.com/jquery.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
	<script src="/resources/js/helpers.js"></script>
</head>

<body>
	<div id="forkongithub"><a href="https://github.com/hydda/hydda.github.io">Source sur GitHub</a></div>

	<div id="menu">
		<p id="logo">
			<a href="/"><img src="/resources/images/logo.png" alt="HYDDA's logo" /></a>
		</p>
		<ul>
			<li ><a href="/">Accueil</a></li>
			<li ><a href="/content/user-guides/snapshot/index.html">Guide Utilisateur</a></li>
			<li  class="active"><a href="/content/developer-guides/snapshot/index.html">Guide Dévéloppeur</a></li>
			<li ><a href="/content/links.html">Liens</a></li>
			<li ><a href="/content/publications.html">Publications</a></li>
		</ul>
	</div>

	<div id="content">
		<h1 id="page-title">Creating a Code Generator</h1>
		
		
		
		
			<p>
				<a href="index.html">OCCIware Studio</a> &raquo; <a href="#">Creating a Code Generator</a>
			</p>
			<br />
		
	
		<p>The following steps allow to create an Acceleo generator based on the OCCI meta-model.</p>

<p>Click <strong>File</strong> » <strong>New</strong> » <strong>Acceleo Project</strong>.<br />
Give your project a name and click <strong>Next</strong>.</p>

<p><img src="/resources/images/code-generators/generator1.png" alt="Acceleo Project" /></p>

<p>In the next window, set the generator options.</p>

<p><img src="/resources/images/code-generators/generator2.png" alt="Generator" /></p>

<p>Click <strong>Finish</strong>. This will open the Acceleo perspective.<br />
Modify the *.mtl file with whatever you want to put in the file.</p>

<p>Then execute the generator by following these steps.</p>

<ol>
  <li>
    <p>In the new project, open the <strong>generate.mtl</strong> file from the navigator view (left panel).<br />
This file is located under the <strong>src</strong> directory, in the project’s.main package.</p>
  </li>
  <li>
    <p>Set the generated file name.<br />
This can be a dynamic expression.</p>
  </li>
</ol>

<div class="language-bash highlighter-rouge"><pre class="codehilite"><code><span class="c"># Dynamic one</span>
file <span class="o">(</span>extension.name, <span class="nb">false</span>, <span class="s1">'UTF-8'</span><span class="o">)</span>

<span class="c"># Static one</span>
file <span class="o">(</span><span class="s1">'configuration.xml'</span>, <span class="nb">false</span>, <span class="s1">'UTF-8'</span><span class="o">)</span>
</code></pre></div>

<p>The static example is on purpose.<br />
Indeed, a configuration does not have any attribute usable to generate a distinct name.</p>

<p>3. Inside the “file” mark-ups, write the generator: static text, dynamic text using ocl generation, templates calls, etc. 
Please refer to <a href="http://help.eclipse.org/mars/index.jsp?topic=%2Forg.eclipse.acceleo.doc%2Fpages%2Freference%2Flanguage.html">Acceleo’s documentation</a>
for more informations on how to write a generator.
The <a href="https://github.com/occiware/ecore/blob/master/clouddesigner/org.occiware.clouddesigner.occi.gen.doc/src/org/occiware/clouddesigner/occi/gen/doc/main/generate.mtl">extension that generates documentation</a> can be used as an inspiration.</p>

<p>To test the generator, right-click on the <strong>generate.mtl</strong> file and select <strong>Run as</strong> » <strong>Launch Acceleo application</strong>.<br />
Add the OCCI meta-model URI: click on the <code class="highlighter-rouge">+</code> button and select <code class="highlighter-rouge">http://schemas.ogf.org/occi</code>.
Then, select the input model to use (delete the “xmi” filter in the dialog in order to display all files).
The input model is the root type of the generator (so, either an extension or a configuration, depending on whether you
want to generate from an occie or occic extension).</p>

<p><img src="/resources/images/code-generators/generator3.png" alt="Add the OCCI metamodel URI" /></p>

<p><img src="/resources/images/code-generators/generator4.png" alt="Select the root type of the generator" /></p>

<p>Select the Target (project) directory where the generated files are going to be stored.</p>

<p><img src="/resources/images/code-generators/generator5.png" alt="Select the root type of the generator" /></p>

<p>Eventually…</p>

<ul>
  <li>Check the <strong>Main template</strong> and <strong>Generate file</strong> options.</li>
  <li>Configuration: Runner =&gt; Java Application</li>
  <li>Click <strong>Run</strong>.</li>
  <li>Open the generated file in the target directory to check the result.</li>
</ul>

<p><img src="/resources/images/code-generators/generator6.png" alt="Select a" /></p>

<blockquote>
  <p>To ease the generator’s development, you can open both the generator and resulting file and drag one of them.<br />
This way, you will view both of them at the same time (some sort of WYSIWYG).<br />
To relaunch a generation, hit <code class="highlighter-rouge">CTRL + F11</code> when the focus is on the generate.mtl file.</p>
</blockquote>

	</div>
	<div class="clear"></div>

	<div id="footer">
		Copyright &copy; 2017-2018, HYDDA Partners
	</div>

</body>
</html>
